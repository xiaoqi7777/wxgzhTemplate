{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?0efe","webpack:///./src/App.vue","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?016b","webpack:///./src/components/HelloWorld.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["App","name","data","openId","methods","getSDK","str","location","href","console","log","this","axio","get","then","res","wx","config","debug","appId","timestamp","nonceStr","noncestr","signature","jsApiList","ready","checkJsApi","success","error","oAuth","getOpenID","_this","code","isSubscribe","includes","start","indexOf","end","slice","mounted","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","HelloWorld","props","localId","base64","input","obj","scanPay","alert","post","startyin","startRecord","stopyin","_this2","stopRecord","playyin","playVoice","onBridgeReady","WeixinJSBridge","invoke","timeStamp","package","signType","paySign","err_msg","commonPay","_this3","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","money","sent","stop","components_HelloWorld","_vm","staticClass","on","click","_v","directives","rawName","value","expression","type","domProps","$event","target","composing","src","alt","srcset","src_components_HelloWorld","HelloWorld_normalizeComponent","Vue","use","Router","router","routes","path","component","productionTip","prototype","axios","create","baseURL","el","components","template"],"mappings":"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","file":"static/js/app.bcedfef7cfb9aaf06196.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view :openId='openId'/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n  data(){\n    return{\n      openId:null\n    }\n  },\n  methods:{\n    getSDK(){\n      let str = location.href;\n      console.log('fasong*------',str)\n      this.axio.get(`/sdk?url=${str}`).then(data => {\n        let res = data.data;\n        console.log(\"signature\", res);\n        wx.config({\n          debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n          appId: 'wx3df629936bf31f75', // 必填，公众号的唯一标识\n          timestamp: res.timestamp, // 必填，生成签名的时间戳\n          nonceStr: res.noncestr, // 必填，生成签名的随机串\n          signature: res.signature, // 必填，签名\n          jsApiList: [\n            \"startRecord\",\n            \"stopRecord\",\n            \"onVoiceRecordEnd\",\n            \"translateVoice\",\n            \"playVoice\",\n            \"pauseVoice\",\n            \"stopVoice\",\n            \"uploadVoice\",\n            \"chooseImage\",\n            \"previewImage\",\n            \"downloadVoice\",\n            \"chooseWXPay\",\n          ] // 必填，需要使用的JS接口列表\n        });\n        wx.ready(function() {\n          wx.checkJsApi({\n            jsApiList: [\n              \"startRecord\",\n              \"stopRecord\",\n              \"playVoice\",\n              \"chooseWXPay\"\n            ], // 需要检测的JS接口列表，所有JS接口列表见附录2,\n            success: function(res) {\n              console.log(\"成功获取res\", res);\n            }\n          });\n        });\n        wx.error(function(res) {\n          console.log(\"失败\", res);\n        });\n      });\n    },\n    //跳鉴权\n    oAuth(){\n      location.href = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx3df629936bf31f75&redirect_uri=http://tsml520.cn&response_type=code&scope=snsapi_userinfo&state=STATEsg#wechat_redirect`\n    },\n    getOpenID(){\n      this.axio.get(`/user/getOpenId?code=${this.code}`)\n        .then(data=>{\n          this.openId = data.data\n          console.log('获取openId',data)\n        })\n    },\n    isSubscribe(){\n      let str = location.href;\n      console.log(!str.includes('code='))\n      if(!str.includes('code=')){\n        this.oAuth()\n      }else{\n        //截取code 发送给后端\n        let start = str.indexOf(\"code=\") + 5;\n        let end = str.indexOf(\"&state\");\n        this.code = str.slice(start, end);\n        console.log('this.code',this.code)\n        this.getSDK()\n        this.getOpenID()\n      }\n    }\n  },\n  mounted() {\n    this.isSubscribe()\n\n  },\n}\n</script>\n\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{attrs:{\"openId\":_vm.openId}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c36c436\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c36c436\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c36c436\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n      <div class=\"div\" @click=\"startyin\">开启录音</div>\n        <br/>\n      <div class=\"div\" @click=\"stopyin\">停止录音</div>\n        <br/>\n      <div class=\"div\" @click=\"playyin\">播放</div>\n        <br/>\n      <input type=\"text\" v-model=\"input\">\n      <div class=\"div\" @click=\"scanPay\">扫码支付</div>\n      <div class=\"div\" @click=\"commonPay\">普通支付</div>\n\n      <img :src=\"base64\" alt=\"\" srcset=\"\">\n  </div>\n</template>\n\n<script>\nexport default {\n  props:['openId'],\n  data() {\n    return {\n      localId: null,\n      base64:null,\n      input:0,\n      obj:null  \n    };\n  },\n  methods: {\n\n    scanPay(){\n      if(this.input === 0){\n        alert('请输入金额')\n      }\n      this.axio.post('/user/wx',{data:this.input})\n      .then(data=>{\n        this.base64 = data.data\n        console.log('++++++++',data)\n      }) \n    },\n    startyin() {\n      wx.startRecord();\n    },\n    stopyin() {\n      wx.stopRecord({\n        success: res => {\n          this.localId = res.localId;\n          alert(this.localId);\n        }\n      });\n    },\n    playyin() {\n      wx.playVoice({\n        localId: this.localId // 需要播放的音频的本地ID，由stopRecord接口获得\n      });\n    },\n    onBridgeReady(data){\n        console.log('请求的数据',data)\n        WeixinJSBridge.invoke(\n            'getBrandWCPayRequest', {\n              \"appId\":data.appId,     //公众号名称，由商户传入     \n              \"timeStamp\":data.timeStamp,         //时间戳，自1970年以来的秒数     \n              \"nonceStr\":data.nonceStr, //随机串     \n              \"package\":`prepay_id=${data.package}`,     \n              \"signType\":\"MD5\",         //微信签名方式：     \n              \"paySign\":data.paySign //微信签名 \n            },\n            function(res){\n            if(res.err_msg == \"get_brand_wcpay_request:ok\" ){\n            // 使用以上方式判断前端返回,微信团队郑重提示：\n                  //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n            } \n        }); \n      },\n    async commonPay() {\n      let data = await this.axio.post('/user/commonPay',{money:this.input})\n      this.obj = data.data\n      this.onBridgeReady(this.obj)\n\n      // wx.chooseWXPay({\n      //     timeStamp: this.obj.timeStamp, //时间戳，自1970年以来的秒数\n      //     nonceStr:this.obj.nonceStr, //随机串\n      //     package: `prepay_id=${this.obj.package}`,\n      //     signType: this.obj.signType, //微信签名方式：\n      //     paySign: this.obj.paySign //微信签名\n      //   },\n      //   function(res) {\n      //     console.log('---------',res)\n      //     if (res.err_msg == \"get_brand_wcpay_request:ok\") {\n      //       console.log('支付成功~~~~~~~~~~')\n      //       // 使用以上方式判断前端返回,微信团队郑重提示：\n      //       //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n      //     }\n      //   }\n      // );\n    }\n  }\n};\n</script>\n\n<style scoped>\n.div {\n  height: 50px;\n  width: 100px;\n  border: 2px solid rebeccapurple;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"div\",on:{\"click\":_vm.startyin}},[_vm._v(\"开启录音\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"div\",on:{\"click\":_vm.stopyin}},[_vm._v(\"停止录音\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"div\",on:{\"click\":_vm.playyin}},[_vm._v(\"播放\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input),expression:\"input\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.input)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"div\",on:{\"click\":_vm.scanPay}},[_vm._v(\"扫码支付\")]),_vm._v(\" \"),_c('div',{staticClass:\"div\",on:{\"click\":_vm.commonPay}},[_vm._v(\"普通支付\")]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.base64,\"alt\":\"\",\"srcset\":\"\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4717a5e4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4717a5e4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelloWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4717a5e4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4717a5e4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n// import HelloWorld from '@/components/video'\nimport HelloWorld from '@/components/HelloWorld'\n\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport axios from 'axios'\n\nVue.config.productionTip = false\nlet url = 'http://tsml520.cn' \n\nVue.prototype.axio = axios.create({\n  baseURL: url,\n})\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}